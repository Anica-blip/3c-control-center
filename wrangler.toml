# =====================================================
# CLOUDFLARE WORKER CONFIGURATION
# =====================================================
# 3C Control Center - Screenshot Service
# Auto-deploys from GitHub when connected

name = "3c-control-center"
main = "worker.js"
compatibility_date = "2024-12-09"
workers_dev = true

# =====================================================
# R2 BUCKET BINDING
# =====================================================
# Binds the R2 bucket to the worker
# Access in code via: env.SCREENSHOTS

[[r2_buckets]]
binding = "SCREENSHOTS"
bucket_name = "3c-control-center"

# =====================================================
# ENVIRONMENT VARIABLES
# =====================================================
# These are set in Cloudflare Dashboard → Worker Settings → Variables
# DO NOT put actual values here (they're in dashboard as secrets)

[vars]
R2_BUCKET_NAME = "3c-control-center"
WORKER_ENV = "production"

# =====================================================
# SECRETS (Set via Cloudflare Dashboard)
# =====================================================
# Required secrets (add in Worker Settings → Variables):
#
# R2_ACCESS_KEY_ID          - R2 API access key
# R2_SECRET_ACCESS_KEY      - R2 API secret key  
# R2_ACCOUNT_ID             - Cloudflare account ID
# SUPABASE_URL              - Supabase project URL
# SUPABASE_SERVICE_KEY      - Supabase service role key
#
# Optional (for external webpage screenshots via GitHub Actions):
# GITHUB_TOKEN              - GitHub personal access token (not needed for Phase 1)
# GITHUB_REPO               - Your GitHub repo (e.g., "username/3c-control-center")

# =====================================================
# ROUTES (Optional - for custom domain)
# =====================================================
# Uncomment and modify if you want custom domain
# routes = [
#   { pattern = "screenshots.yourdomain.com/*", zone_name = "yourdomain.com" }
# ]

# =====================================================
# LIMITS
# =====================================================
# Free tier limits:
# - 100,000 requests/day
# - 10ms CPU time per request
# - R2: 10GB storage free
# - R2: 1M Class A operations/month free

[limits]
cpu_ms = 50
